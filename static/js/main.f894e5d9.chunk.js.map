{"version":3,"sources":["context/util.js","context/SnakeContext.js","context/create.context.helper.js","hooks/useInterval.js","components/Container.js","components/Cell.js","components/Row.js","components/App.js","index.js"],"names":["DIRECTION","randomFoodPosition","snake","x","Math","floor","random","y","length","some","s","moveUtil","state","direct","lastDirect","dirIndex","indexOf","slice","initialState","food","foodExist","stop","lastLocation","reducer","type","payload","actionTypes","CHANGE_DIRECTION","newDirect","lastPendingDirect","abs","changeDirectionUtil","MOVE","CREATE_FOOD","EAT_FOOD","STOP","RESET","CHECK_STATUS","CHECK_FOOD_STATUS","actions","Context","createContext","Provider","children","useReducer","dispatch","boundActions","useMemo","key","console","log","getActions","value","useContext","createContextHelper","changeDirection","move","createFood","eatFood","last_location","setStop","reset","checkStatus","checkFoodStatus","useInterval","cb","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","Container","ref","useSnakeContext","containerRef","useImperativeHandle","focus","onKeyDownHandler","useCallback","keyCode","includes","onTick","tabIndex","onKeyDown","className","displayName","React","forwardRef","memo","active","head","Row","yaxis","row","_range","map","_food","props","filter","getRowProps","getRow","inital","GameMsgComponent","onConfirm","msgObj","msg","btnTitle","onClick","GameMsg","App","SnakeContext","createRef","rows","r","getRows","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.f894e5d9.chunk.js","sourcesContent":["export const DIRECTION = [\"left\", \"top\", \"right\", \"down\"];\r\n/*\r\n\tLeft & Right Directiocn is at index 0 & 2 and have x value change at index - 1 per interval\r\n\tTop & Down Directiocn is at index 1 & 3 and have y value change at index - 2 per interval\r\n*/\r\n\r\nexport const randomFoodPosition = (snake = []) => {\r\n\tconst x = Math.floor(Math.random() * 14), y = Math.floor(Math.random() * 11);\r\n\t\r\n\tif(snake.length >= 14 * 11 - 1)\r\n\t\tthrow('No More Available Space')\r\n\r\n\treturn snake.some(s => s.x === x && s.y === y) ? randomFoodPosition(snake) : {x, y}\r\n};\r\n\r\nexport const moveUtil = (state) => {\r\n\tconst { direct, lastDirect, snake } = state;\r\n\tlet { x, y } = snake[0];\r\n\tconst dirIndex = DIRECTION.indexOf(direct[0] || lastDirect);\r\n\r\n\tif(dirIndex % 2 === 0) \r\n\t\tx += dirIndex - 1;\r\n\telse \r\n\t\ty += dirIndex - 2;\r\n\r\n\treturn [{ x, y }, ...snake.slice(0, -1)]\r\n}\r\n\r\nexport const changeDirectionUtil = (state, newDirect) => {\r\n\tconst {direct, lastDirect} = state\r\n\tconst lastPendingDirect = direct.slice(-1)[0] || lastDirect\r\n\r\n\treturn (lastPendingDirect === newDirect || Math.abs(DIRECTION.indexOf(newDirect) - DIRECTION.indexOf(lastPendingDirect)) === 2) ? state : { ...state, direct: [...state.direct, newDirect] };\r\n}","import createContextHelper from \"./create.context.helper\";\r\nimport { act } from \"react-dom/test-utils\";\r\n\r\nimport {DIRECTION, randomFoodPosition, moveUtil, changeDirectionUtil} from './util'\r\n\r\nconst initialState = {\r\n\tsnake: [{ x: 6, y: 5 }],\r\n\tdirect: [DIRECTION[1]],\r\n\tlastDirect: DIRECTION[1], \r\n\tfood: randomFoodPosition([{ x: 6, y: 5 }]),\r\n\tfoodExist: false,\r\n\tstop: true, \r\n\tlastLocation: {}\r\n};\r\n\r\nconst reducer = (state, { type, payload }) => {\r\n\tswitch (type) {\r\n\t\tcase actionTypes.CHANGE_DIRECTION:\r\n\t\t\tif(state.stop) \r\n\t\t\t\treturn state\r\n\r\n\t\t\t//return original state if same direction or opposite direction\r\n\t\t\t// return (state.direct[0] === payload || Math.abs(DIRECTION.indexOf(payload) - DIRECTION.indexOf(state.direct[0])) === 2) ? state : { ...state, direct: [...state.direct, payload] };\r\n\t\t\treturn changeDirectionUtil(state, payload)\r\n\t\tcase actionTypes.MOVE:\r\n\t\t\treturn { ...state, snake: moveUtil(state), lastLocation: state.snake.slice(-1)[0], direct: state.direct.slice(1), lastDirect: state.direct[0] || state.lastDirect};\r\n\t\tcase actionTypes.CREATE_FOOD:\r\n\t\t\treturn { ...state, food: randomFoodPosition(state.snake), foodExist: true }\r\n\t\tcase actionTypes.EAT_FOOD:\r\n\t\t\treturn { ...state, ...payload, snake: [...state.snake, payload], foodExist: false };\r\n\t\tcase actionTypes.STOP:\r\n\t\t\treturn { ...state, stop: true };\r\n\t\tcase actionTypes.RESET:\r\n\t\t\t//do no reset if the game is running\r\n\t\t\treturn state.stop ? { ...initialState, stop: false } : state;\r\n\t\tcase actionTypes.CHECK_STATUS:\r\n\t\t\tif (\r\n\t\t\t\tstate.snake[0].x < 0 ||\r\n\t\t\t\tstate.snake[0].y < 0 ||\r\n\t\t\t\tstate.snake[0].x > 13 ||\r\n\t\t\t\tstate.snake[0].y > 10 ||\r\n\t\t\t\tstate.snake.slice(1).some(s => s.x === state.snake[0].x && s.y === state.snake[0].y)\r\n\t\t\t) return { ...state, stop: true }\r\n\t\t\treturn state\r\n\t\tcase actionTypes.CHECK_FOOD_STATUS:\r\n\t\t\tif(state.snake[0].x === state.food.x && state.snake[0].y === state.food.y)\r\n\t\t\t\treturn { \r\n\t\t\t\t\t...state, \r\n\t\t\t\t\tsnake: [...state.snake, state.lastLocation], \r\n\t\t\t\t\tfood: randomFoodPosition(state.snake), \r\n\t\t\t\t\tfoodExist: true\r\n\t\t\t\t}\r\n\t\t\telse \r\n\t\t\t\treturn state\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nconst move = (dispatch) => () => {\r\n\tdispatch({\r\n\t\ttype: actionTypes.MOVE\r\n\t});\r\n};\r\n\r\nconst changeDirection = (dispatch) => (direct) => {\r\n\tdispatch({\r\n\t\ttype: actionTypes.CHANGE_DIRECTION,\r\n\t\tpayload: DIRECTION[direct]\r\n\t});\r\n};\r\n\r\nconst createFood = (dispatch) => () => {\r\n\tdispatch({\r\n\t\ttype: actionTypes.CREATE_FOOD,\r\n\t});\r\n};\r\n\r\nconst eatFood = (dispatch) => (last_location) => {\r\n\tdispatch({\r\n\t\ttype: actionTypes.EAT_FOOD,\r\n\t\tpayload: last_location\r\n\t});\r\n};\r\n\r\nconst setStop = (dispatch) => () => {\r\n\tdispatch({\r\n\t\ttype: actionTypes.STOP\r\n\t});\r\n};\r\n\r\nconst reset = (dispatch) => () => {\r\n\tdispatch({\r\n\t\ttype: actionTypes.RESET\r\n\t});\r\n};\r\n\r\nconst checkStatus = (dispatch) => () => {\r\n\tdispatch({\r\n\t\ttype: actionTypes.CHECK_STATUS\r\n\t})\r\n}\r\n\r\nconst checkFoodStatus = (dispatch) => () => {\r\n\tdispatch({\r\n\t\ttype: actionTypes.CHECK_FOOD_STATUS\r\n\t})\r\n}\r\n\r\nexport const { Context, Provider, useContext } = createContextHelper(\r\n\t(...p) => {\r\n\t\tconst state = reducer(...p)\r\n\t\tconsole.log('Reducer State ', state)\r\n\t\treturn state\r\n\t},\r\n\t{ changeDirection, move, createFood, eatFood, setStop, reset, checkStatus, checkFoodStatus },\r\n\tinitialState\r\n);\r\n\r\nconst actionTypes = {\r\n\tMOVE: \"MOVE\",\r\n\tCHANGE_DIRECTION: \"CHANGE_DIRECTION\",\r\n\tCREATE_FOOD: \"CREATE_FOOD\",\r\n\tEAT_FOOD: \"EAT_FOOD\",\r\n\tSTOP: \"STOP\",\r\n\tRESET: \"RESET\", \r\n\tCHECK_STATUS: \"CHECK_STATUS\", \r\n\tCHECK_FOOD_STATUS: \"CHECK_FOOD_STATUS\", \r\n};","import React, { createContext, useReducer, useContext, useCallback, useMemo } from \"react\";\r\n\r\nconst getActions = (actions, dispatch, state) => {\r\n\tconst boundActions = {}\r\n\t\r\n\tfor (let key in actions) {\r\n\t\t// boundActions[key] = actions[key](dispatch, state);\r\n\r\n\t\tboundActions[key] = (...p) => {\r\n\t\t\tconsole.log('Actions Dispatch: ', key)\r\n\t\t\tactions[key](dispatch)(...p)\r\n\t\t};\r\n\t}\r\n\r\n\treturn boundActions\r\n}\r\n\r\nexport default (reducer, actions, initialState) => {\r\n\tconst Context = createContext();\r\n\r\n\tconst Provider = ({ children }) => {\r\n\t\tconst [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n\t\tconst boundActions = useMemo(() => getActions(actions, dispatch), [actions, dispatch]);\r\n\t\t// const boundActions = getActions(actions, dispatch, state);\r\nconsole.log('here', children)\r\n\t\treturn (\r\n\t\t\t<Context.Provider value={{ state, ...boundActions }}>\r\n\t\t\t\t{children}\r\n\t\t\t</Context.Provider>\r\n\t\t);\r\n\t};\r\n\r\n\tconst _useContext = () => useContext(Context)\r\n\r\n\treturn { Context, Provider, useContext: _useContext };\r\n};\r\n","import React, { useRef, useEffect } from \"react\";\r\n\r\nconst useInterval = (cb, delay) => {\r\n\tconst savedCallback = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\tsavedCallback.current = cb;\r\n\t}, [cb]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfunction tick() {\r\n\t\t\tsavedCallback.current();\r\n\t\t}\r\n\r\n\t\tif (delay !== null) {\r\n\t\t\tlet id = setInterval(tick, delay);\r\n\t\t\treturn () => clearInterval(id);\r\n\t\t}\r\n\t}, [delay]);\r\n};\r\n\r\nexport default useInterval;\r\n","import React, { useContext, useState, useEffect, useCallback, useRef, useImperativeHandle } from \"react\";\r\nimport { Context as SnakeContext, useContext as useSnakeContext } from \"../context/SnakeContext\";\r\nimport useInterval from \"../hooks/useInterval\";\r\nimport _ from \"lodash\";\r\n\r\nlet LAST_LOCATION = {};\r\n\r\nconst Container = ({ children }, ref) => {\r\n\tconst {\r\n\t\tstate: { snake, foodExist, food, stop },\r\n\t\tchangeDirection,\r\n\t\tmove,\r\n\t\tcreateFood,\r\n\t\teatFood,\r\n\t\tsetStop,\r\n\t\treset, \r\n\t\tcheckStatus, \r\n\t\tcheckFoodStatus\r\n\t// } = useContext(SnakeContext);\r\n\t} = useSnakeContext();\r\n\tconst containerRef = useRef();\r\n\r\n\tuseImperativeHandle(ref, () => ({\r\n\t  focus: () => {\r\n\t\tcontainerRef.current.focus();\r\n\t  }\r\n\t}));\r\n\r\n\tconst onKeyDownHandler = useCallback(({ keyCode }) => {\r\n\t\tif (keyCode === 13) \r\n\t\t\treset();\r\n\r\n\t\tif([37, 38, 39, 40].includes(keyCode))\r\n\t\t\tchangeDirection(keyCode - 37);\r\n\t}, [reset, changeDirection]);\r\n\r\n\tconst onTick = useCallback(() => {\r\n\t\tmove()\r\n\t\tcheckStatus()\r\n\t\tcheckFoodStatus()\r\n\t}, [move, checkStatus, checkFoodStatus])\r\n\r\n\tuseInterval(onTick, !stop ? 250 : null);\r\n\r\n\treturn (\r\n\t\t<div id='container' ref={containerRef} tabIndex=\"0\" onKeyDown={onKeyDownHandler} className=\"body\">\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"score\">Your Score: {snake.length - 1}</div>\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nContainer.displayName = 'Container'\r\n\r\nexport default React.forwardRef(Container);\r\n","import React from \"react\";\r\n\r\nconst Cell = ({ active, head, food }) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`cell ${active ? \"active\" : \"\"} ${head ? \"head\" : \"\"} ${food ? \"food\" : \"\"}`}\r\n\t\t></div>\r\n\t);\r\n};\r\n\r\nexport default React.memo(Cell);\r\n","import React, {useContext, useMemo} from \"react\";\r\nimport { Context as SnakeContext, useContext as useSnakeContext } from '../context/SnakeContext'\r\nimport Cell from \"./Cell\";\r\n\r\nimport _range from 'lodash/range'\r\n\r\nexport const getRowProps = (snake, _food, x, y) => {\r\n\tconst props = {}\r\n\t\r\n\tprops.active = snake.filter(s => s.y === y).map(s => s.x).includes(x)\r\n\tprops.head = snake[0].y === y ? snake[0].x === x : false\r\n\tprops.food =  _food.y === y ? _food.x === x : false\r\n\r\n\treturn props\r\n}\r\n\r\nexport const getRow = (snake, food, y) => x => {\r\n\treturn <Cell key={x} {...getRowProps(snake, food, x, y)}/>\r\n}\r\n\r\nconst Row = ({ yaxis: y }) => {\r\n\t// const { state: { snake, food } } = useContext(SnakeContext)\r\n\tconst { state: { snake, food } } = useSnakeContext()\r\n\tconst row = useMemo(() => _range(14).map(getRow(snake, food, y)), [snake, food, y])\r\n\r\n\treturn <div className=\"row\">{row}</div>\r\n}\r\n\r\nexport default Row;","import React, { useState, useContext, useEffect, useMemo } from \"react\";\r\nimport { Context as SnakeContext } from \"../context/SnakeContext\";\r\nimport \"./css/style.css\";\r\nimport Container from \"./Container\";\r\nimport Row from \"./Row\";\r\n\r\nimport _range from 'lodash/range'\r\n\r\nlet inital = 0\r\n\r\nconst GameMsgComponent = ({stop, onConfirm}) => {\r\n\tconst msgObj = inital === 0 ? {msg: 'Welcome', btnTitle: 'Start'} : {msg: 'GameOver', btnTitle: 'Reset'}\r\n\r\n\tinital++\r\n\r\n\tif(!stop) return null\r\n\r\n\treturn (\r\n\t\t<div className=\"msg\">\r\n\t\t\t<div className=\"msg-bg\" />\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"msg-title\">{msgObj.msg}</div>\r\n\t\t\t\t<button onClick={onConfirm} className=\"msg-btn\">\r\n\t\t\t\t\t{msgObj.btnTitle}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\nGameMsgComponent.displayName = 'GameMsg'\r\n\r\nconst GameMsg = React.memo(GameMsgComponent)\r\n\r\nconst getRows = (rows) => {\r\n\tconsole.log('memo')\r\n\treturn _range(rows).map(r => <Row key = {r} yaxis = {r} />)\r\n}\r\n\r\nlet prev = null\r\n\r\nconst App = () => {\r\n\tconst {\r\n\t\tstate: { stop },\r\n\t\treset\r\n\t} = useContext(SnakeContext);\r\n\tconst containerRef = React.createRef()\r\n\r\n\tuseEffect(() => {\r\n\t\tcontainerRef.current.focus()\r\n\t}, [])\r\n\r\n\tconst rows = useMemo(() => getRows(11), [])\r\n\r\n\treturn (\r\n\t\t<Container ref={containerRef}>\r\n\t\t\t<GameMsg stop = {stop} onConfirm = {reset}/>\r\n\t\t\t{rows}\t\t\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\nimport { Provider as SnakeProvider } from \"./context/SnakeContext\";\r\n\r\nReactDOM.render(\r\n\t<SnakeProvider>\r\n\t\t<App />\r\n\t</SnakeProvider>,\r\n\tdocument.querySelector(\"#root\")\r\n);\r\n"],"sourceRoot":""}
(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],{15:function(e,t,n){e.exports=n(41)},23:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(8),r=n.n(c),s=n(2),i=n(1),u=n(14),l=(n(21),["left","top","right","down"]),f=function randomFoodPosition(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Math.floor(14*Math.random()),n=Math.floor(11*Math.random());if(e.length>=153)throw"No More Available Space";return e.some((function(e){return e.x===t&&e.y===n}))?randomFoodPosition(e):{x:t,y:n}},d=function moveUtil(e){var t=e.direct,n=e.lastDirect,o=e.snake,a=o[0],c=a.x,r=a.y,i=l.indexOf(t[0]||n);return i%2===0?c+=i-1:r+=i-2,[{x:c,y:r}].concat(Object(s.a)(o.slice(0,-1)))},O={snake:[{x:6,y:5}],direct:[l[1]],lastDirect:l[1],food:f([{x:6,y:5}]),foodExist:!1,stop:!0,lastLocation:{}},m=function reducer(e,t){var n=t.type,o=t.payload;switch(n){case b.CHANGE_DIRECTION:return e.stop?e:function changeDirectionUtil(e,t){var n=e.direct,o=e.lastDirect,a=n.slice(-1)[0]||o;return a===t||2===Math.abs(l.indexOf(t)-l.indexOf(a))?e:Object(i.a)({},e,{direct:[].concat(Object(s.a)(e.direct),[t])})}(e,o);case b.MOVE:return Object(i.a)({},e,{snake:d(e),lastLocation:e.snake.slice(-1)[0],direct:e.direct.slice(1),lastDirect:e.direct[0]||e.lastDirect});case b.CREATE_FOOD:return Object(i.a)({},e,{food:f(e.snake),foodExist:!0});case b.EAT_FOOD:return Object(i.a)({},e,{},o,{snake:[].concat(Object(s.a)(e.snake),[o]),foodExist:!1});case b.STOP:return Object(i.a)({},e,{stop:!0});case b.RESET:return e.stop?Object(i.a)({},O,{stop:!1}):e;case b.CHECK_STATUS:return e.snake[0].x<0||e.snake[0].y<0||e.snake[0].x>13||e.snake[0].y>10||e.snake.slice(1).some((function(t){return t.x===e.snake[0].x&&t.y===e.snake[0].y}))?Object(i.a)({},e,{stop:!0}):e;case b.CHECK_FOOD_STATUS:return e.snake[0].x===e.food.x&&e.snake[0].y===e.food.y?Object(i.a)({},e,{snake:[].concat(Object(s.a)(e.snake),[e.lastLocation]),food:f(e.snake),foodExist:!0}):e;default:return e}},E=function(e,t,n){var c=Object(o.createContext)();return{Context:c,Provider:function Provider(r){var s=r.children,l=Object(o.useReducer)(e,n),f=Object(u.a)(l,2),d=f[0],O=f[1],m=Object(o.useMemo)((function(){return function getActions(e,t,n){var o={},a=function _loop(n){o[n]=function(){console.log("Actions Dispatch: ",n),e[n](t).apply(void 0,arguments)}};for(var c in e)a(c);return o}(t,O)}),[t,O]);return console.log("here",s),a.a.createElement(c.Provider,{value:Object(i.a)({state:d},m)},s)},useContext:function _useContext(){return Object(o.useContext)(c)}}}((function(){var e=m.apply(void 0,arguments);return console.log("Reducer State ",e),e}),{changeDirection:function changeDirection(e){return function(t){e({type:b.CHANGE_DIRECTION,payload:l[t]})}},move:function move(e){return function(){e({type:b.MOVE})}},createFood:function createFood(e){return function(){e({type:b.CREATE_FOOD})}},eatFood:function eatFood(e){return function(t){e({type:b.EAT_FOOD,payload:t})}},setStop:function setStop(e){return function(){e({type:b.STOP})}},reset:function reset(e){return function(){e({type:b.RESET})}},checkStatus:function checkStatus(e){return function(){e({type:b.CHECK_STATUS})}},checkFoodStatus:function checkFoodStatus(e){return function(){e({type:b.CHECK_FOOD_STATUS})}}},O),v=E.Context,p=E.Provider,C=E.useContext,b={MOVE:"MOVE",CHANGE_DIRECTION:"CHANGE_DIRECTION",CREATE_FOOD:"CREATE_FOOD",EAT_FOOD:"EAT_FOOD",STOP:"STOP",RESET:"RESET",CHECK_STATUS:"CHECK_STATUS",CHECK_FOOD_STATUS:"CHECK_FOOD_STATUS"},y=(n(23),function useInterval(e,t){var n=Object(o.useRef)();Object(o.useEffect)((function(){n.current=e}),[e]),Object(o.useEffect)((function(){if(null!==t){var e=setInterval((function tick(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}),T=(n(24),function Container(e,t){var n=e.children,c=C(),r=c.state,s=r.snake,i=(r.foodExist,r.food,r.stop),u=c.changeDirection,l=c.move,f=(c.createFood,c.eatFood,c.setStop,c.reset),d=c.checkStatus,O=c.checkFoodStatus,m=Object(o.useRef)();Object(o.useImperativeHandle)(t,(function(){return{focus:function focus(){m.current.focus()}}}));var E=Object(o.useCallback)((function(e){var t=e.keyCode;13===t&&f(),[37,38,39,40].includes(t)&&u(t-37)}),[f,u]),v=Object(o.useCallback)((function(){l(),d(),O()}),[l,d,O]);return y(v,i?null:250),a.a.createElement("div",{id:"container",ref:m,tabIndex:"0",onKeyDown:E,className:"body"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"score"},"Your Score: ",s.length-1),n))});T.displayName="Container";var k=a.a.forwardRef(T),S=a.a.memo((function Cell(e){var t=e.active,n=e.head,o=e.food;return a.a.createElement("div",{className:"cell ".concat(t?"active":""," ").concat(n?"head":""," ").concat(o?"food":"")})})),x=n(5),h=n.n(x),j=function Row(e){var t=e.yaxis,n=C().state,c=n.snake,r=n.food,s=Object(o.useMemo)((function(){return h()(14).map(function getRow(e,t,n){return function(o){return a.a.createElement(S,Object.assign({key:o},function getRowProps(e,t,n,o){var a={};return a.active=e.filter((function(e){return e.y===o})).map((function(e){return e.x})).includes(n),a.head=e[0].y===o&&e[0].x===n,a.food=t.y===o&&t.x===n,a}(e,t,o,n)))}}(c,r,t))}),[c,r,t]);return a.a.createElement("div",{className:"row"},s)},g=0,D=function GameMsgComponent(e){var t=e.stop,n=e.onConfirm,o=0===g?{msg:"Welcome",btnTitle:"Start"}:{msg:"GameOver",btnTitle:"Reset"};return g++,t?a.a.createElement("div",{className:"msg"},a.a.createElement("div",{className:"msg-bg"}),a.a.createElement("div",null,a.a.createElement("div",{className:"msg-title"},o.msg),a.a.createElement("button",{onClick:n,className:"msg-btn"},o.btnTitle))):null};D.displayName="GameMsg";var _=a.a.memo(D),A=function App(){var e=Object(o.useContext)(v),t=e.state.stop,n=e.reset,c=a.a.createRef();Object(o.useEffect)((function(){c.current.focus()}),[]);var r=Object(o.useMemo)((function(){return function getRows(e){return console.log("memo"),h()(e).map((function(e){return a.a.createElement(j,{key:e,yaxis:e})}))}(11)}),[]);return a.a.createElement(k,{ref:c},a.a.createElement(_,{stop:t,onConfirm:n}),r)};r.a.render(a.a.createElement(p,null,a.a.createElement(A,null)),document.querySelector("#root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.818dd7bf.chunk.js.map